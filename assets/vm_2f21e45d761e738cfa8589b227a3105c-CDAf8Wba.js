var V=Object.defineProperty;var z=(e,t,s)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var c=(e,t,s)=>z(e,typeof t!="symbol"?t+"":t,s);import{J as I,K as W,g as A,r as f,q as L,L as q,j as o,c as m,d as H,h as J,w as U,C as G,a as Q,b as X,n as S,i as Y,f as T}from"./index-Dxi2XTlO.js";import{n as O,B as v}from"./index-BLs98Sxj.js";import{i as Z}from"./is-null-D6OXYL3N.js";import{p as ee}from"./pick-BK4giCUn.js";import{u as se}from"./index-dTKEvsS8.js";import{k as B}from"./keyboard-DDjTZLpe.js";import{O as te}from"./index-B6dIodR-.js";const _={position:"fixed",overflow:"hidden",width:0,height:0,top:-1,left:-1,padding:0};function F(e){e&&e.focus({preventScroll:!0})}function ne(e,t){let s=e.nextElementSibling;const a=[];for(;s&&s!==t;)s&&a.push(s),s=(s==null?void 0:s.nextElementSibling)||null;return a}class oe{constructor(){c(this,"stack",[]);c(this,"keydownCleanup",O);c(this,"focusinCleanup",O);c(this,"init",t=>{const s=a=>r=>{const n=W(this.stack,-1);n&&n[a](r)};this.keydownCleanup=I(t,"keydown",s("onKeyDown"),!0),this.focusinCleanup=I(t,"focusin",s("onFocusIn"))});c(this,"cleanup",()=>{this.keydownCleanup(),this.focusinCleanup()});c(this,"register",(t,s)=>(this.stack.length||this.init(t),this.stack.push(s),()=>{this.stack=this.stack.filter(a=>a!==s),this.stack.length||this.cleanup()}))}get size(){return this.stack.length}}const ae=new oe;class re{constructor(){c(this,"$start",{current:null});c(this,"$end",{current:null});c(this,"isShiftTab",!1);c(this,"latestFocus",null);c(this,"returnFocus",null);c(this,"reset",()=>{this.latestFocus=null,this.returnFocus=null})}get start(){return this.$start.current}get end(){return this.$end.current}}function ie(){const e=A(()=>new re);return{refs:e,handleCleanup:()=>{e.latestFocus=null,e.returnFocus=null},handleFocusTrap:a=>{const r=i=>{const u=ne(e.start,e.end);if(!u.length||!i)return;const d=a.activeElement;if(d!==e.start&&d!==e.end){if(u.some(p=>p===i||p.contains(i))){e.latestFocus=i;return}if(e.latestFocus)return F(e.latestFocus)}F(e.isShiftTab?e.end:e.start)},n=i=>{e.isShiftTab=i.key===B.tab&&i.shiftKey,r(i.target)},b=i=>{i.stopImmediatePropagation(),r(i.target)};return ae.register(a,{onFocusIn:b,onKeyDown:n})}}}function le(e,t){const{active:s,children:a,onExit:r}=e,{refs:n,handleCleanup:b,handleFocusTrap:i}=ie();f.useImperativeHandle(t,()=>({focus:()=>{F(n.start)}}));const u=L(()=>{if(!s)return;const d=q(n.start);n.returnFocus=d.activeElement;const p=i(d);return()=>{p(),r==null||r(n.returnFocus),b()}});return f.useEffect(()=>u(),[s,u]),f.useEffect(()=>()=>{n.reset()},[n]),o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:n.$start,style:_,tabIndex:s?0:-1}),a,o.jsx("div",{ref:n.$end,style:_,tabIndex:s?0:-1})]})}const ce=f.forwardRef(le);function ue(e,t,s){const{className:a,classNames:r={}}=t;return{root:m(e,s==null?void 0:s.className,a,r.root),body:m(`${e}__body`,r.body),closeBtn:m(`${e}__close-btn`,r.closeBtn),footer:m(`${e}__footer`,r.footer),header:m(`${e}__header`,r.header),main:m(`${e}__main`,r.main)}}function de(e){const[t,s]=H(e);return[J(e,()=>{e&&s(!0)}),t,s]}const pe={closeOnEscape:!0,closable:!0,mask:!0,maskClosable:!0,returnFocus:!0},fe=["getContainer","mask","isOpen","transitions","keepMounted","unmountOnExit","zIndex"];function me(e){const t=U(e,pe),{children:s,footer:a,modalRender:r,onCancel:n,onOk:b,isOpen:i,title:u,transitions:d={}}=t,{modal:p}=G.useState(),[M,C,E]=de(i),j=f.useRef(null),w=f.useRef(null),$=f.useId(),g=Q(),x=`${g}-modal`,h=ue(x,t,p),k=X(t,p),[he,R]=se(t,p,{closeIconRender:l=>o.jsx("button",{className:h.closeBtn,style:k.closeBtn,"aria-label":"close",type:"button",onClick:n,children:l})}),D=t.closeOnEscape?l=>{l.key===B.esc&&(l.stopPropagation(),n==null||n())}:void 0,K=!t.maskClosable||!t.mask?void 0:l=>{l.target&&l.target===j.current&&(n==null||n())},P=t.returnFocus?l=>{const y=l;y&&S(y.focus)&&y.focus()}:void 0;if(M)return null;const N=o.jsxs("div",{className:h.main,style:k.main,children:[R,o.jsx("div",{className:h.header,style:k.header,children:!Y(u)&&o.jsx("span",{className:`${x}__title`,id:$,children:u})}),o.jsx("div",{className:h.body,style:k.body,children:s}),!Z(a)&&o.jsxs("div",{className:h.footer,style:k.footer,children:[o.jsx(v,{onClick:n,children:"取消"}),o.jsx(v,{variant:"filled",onClick:b,children:"确定"})]})]});return o.jsx(te,{...ee(t,fe),classNames:{mask:`${x}-mask`},transitions:{content:T(d.content,`${g}-zoom-in`),mask:T(d.mask,`${g}-fade-in`)},onEnter:()=>{var l;console.log(C),E(!0),(l=w.current)==null||l.focus()},onEntered:()=>{},onExit:()=>{},onExited:()=>{E(!1)},children:(l,y)=>o.jsx("div",{ref:j,tabIndex:-1,className:`${x}-wrapper`,style:{display:C?void 0:"none"},onClick:K,onKeyDown:D,children:o.jsx("div",{ref:l,className:m(h.root,y),style:k.root,"aria-labelledby":u?$:void 0,"aria-modal":"true",role:"dialog",children:o.jsx(ce,{ref:w,active:i,onExit:P,children:S(r)?r(N):N})})})})}function Ee(){const[e,t]=f.useState(!1),s=()=>{t(!0)},a=()=>{t(!1)};return o.jsxs(o.Fragment,{children:[o.jsx(v,{onClick:s,children:"open"}),o.jsx(me,{isOpen:e,onCancel:a,children:o.jsx("div",{children:"12331141341"})})]})}const je={desc:{"zh-CN":`基础用法

`,"en-US":`基础用法

`},rawText:`\`\`\`tsx
import { Button, Modal } from '@mink-ui/core'
import { useState } from 'react'

export default function App() {
  const [isOpen, setIsOpen] = useState(false)

  const open = () => { setIsOpen(true) }
  const close = () => { setIsOpen(false) }

  return (
    <>
      <Button onClick={open}>open</Button>
      <Modal isOpen={isOpen} onCancel={close}>
        <div>12331141341</div>
      </Modal>
    </>
  )
}
\`\`\`
`,cssWrapName:"css0267a0976af12b88ae889194612a8888"};export{Ee as A,je as i};
